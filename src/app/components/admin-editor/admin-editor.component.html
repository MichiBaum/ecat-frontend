<p-dialog [(visible)]="showDialog" [modal]="true">
  <div class="container p-dir-col p-grid p-justify-center">
    <div class="formGroup p-col" *ngIf="authenticationService.hasPermission('ADMINISTRATE_ADMINS')">
      <label>Benutzerauswahl</label>
      <p-dropdown [options]="usersItems" [(ngModel)]="selectedUser" (onChange)="adminForm.patchValue($event.value)"></p-dropdown>
    </div>
    <form [formGroup]="adminForm">
      <div class="formGroup p-col">
        <label for="nameField">Name</label>
        <input type="text" pInputText formControlName="name" id="nameField">
      </div>
      <div class="formGroup p-col" *ngIf="authenticationService.hasPermission('ADMINISTRATE_ADMINS')">
        <label for="permissionsField">Rechte</label>
        <p-multiSelect id="permissionsField" [options]="permissionsItems" formControlName="permissions"></p-multiSelect>
      </div>
      <div class="formGroup p-col">
        <label for="passwordField">Neues Passwort</label>
        <input type="password" pInputText formControlName="password" id="passwordField">
      </div>
    </form>
    <div class="formGroup p-col">
      <label for="confirmPasswordField">Neues Passwort bestätigen</label>
      <input type="password" pInputText id="confirmPasswordField">
    </div>
    <div class="formGroup p-col">
      <p-button label="Speichern" (onClick)="saveUser()"></p-button>
      <p-button label="Löschen" (onClick)="deleteUser()" [disabled]="!selectedUser || selectedUser.id == ownUser.id || selectedUser.id == 0 || !selectedUser.id"></p-button>
      <p-button label="Undo" (onClick)="resetFormToLastState()" [disabled]="!selectedUser || selectedUser.id == 0 || !selectedUser.id"></p-button>
    </div>
  </div>
</p-dialog>
